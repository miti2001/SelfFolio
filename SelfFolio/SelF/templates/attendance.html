{% extends 'base.html' %}

{% load get_id %}

{% block content %}

<br> <br> <br>
<h4>Attendance</h4>
<br>
{% if courses %}
<table class="table" id="table">
    <thead class="thead-light">
        <tr>
            <th>User ID</th>
            <th>Subject Code</th>
            <th>Subject Name</th>
            <th>Present</th>
            <th>Absent</th>
            <th>Attendance</th>
            <th>Mark Attendance</th>
            <th>Edit</th>
            <th>Delete</th>
        </tr>
    </thead>
    <tbody>
        {% for course in courses %}
            <tr>
                <td>{{ request.user.id }}</td>
                <td>{{ course.code }}</td>
                <td>{{ course.subject }}</td>
                <td>{{ course.present }}</td>
                <td>{{ course.absent }}</td>
                <td>{{ course.attendance|floatformat:2 }} %</td>
                <td>
                    <a href="markAttendance/?id={{ course | get_id }}">Mark attendance</a>
                </td>
                <td><a href="editSub/?id={{ course.id }}">Edit</a></td>
                <td><a href="deleteSub/?id={{ course.id }}">Delete</a></td>
            </tr>
        {% endfor %}
    </tbody>
</table>
{% endif %}

<a href="addSub">Add a course</a>


<!-- <form class="form-inline" method="POST" action="">
  {% csrf_token %}
  <div class="form-group">
    <label for="subject" class="control-label col-sm-1">Subject: </label>
    <div class="col-sm-3">
      <input id="subject" name="subject" type="char" class="form-control">
    </div>
  </div>

  <div class="form-group">
    <label for="code" class="control-label col-sm-1">Code: </label>
    <div class="col-sm-3">
      <input id="code" name="code" type="char" class="form-control">
    </div>
  </div>

  <div class="form-group">
    <label for="present" class="control-label col-sm-1">Present: </label>
    <div class="col-sm-2">
        <input id="present" name="present" type="number" class="form-control">
    </div>
  </div>

  <div class="form-group">
    <label for="absent" class="control-label col-sm-1">Absent: </label>
    <div class="col-sm-4">
      <input id="absent" name="absent" type="number" class="form-control">
    </div>
  </div>

  <div class="form-group">
  <button type="submit">
    Submit
  </button>
  </div>
  
</form>

<div id="container" style="width: 75%;">
<canvas id="bar-chart"></canvas>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
<script>

var config = {
    type: 'horizontalBar',
    data: {
    datasets: [{
        data: {{ data|safe }},
        label: 'Attendance'
    }],
    labels: {{ labels|safe }}
    },
    options: {
    responsive: true
    }
};

window.onload = function() {
    var ctx = document.getElementById('bar-chart').getContext('2d');
    window.myattendence = new Chart(ctx, config);
};

</script> -->
  
{% endblock %}